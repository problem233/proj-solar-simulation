parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"zcNd":[function(require,module,exports) {
"use strict";function t(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)}function a(t,a,e){var r=new Path2D;return r.moveTo(t+e,a),r.arc(t,a,e,0,2*Math.PI),r}function e(t,a){void 0===a&&(a=99);for(var e=t.getImageData(0,0,t.canvas.width,t.canvas.height),r=0;r<e.height;r++)for(var i=0;i<e.width;i++)e.data[i*(4*e.height)+4*r+3]-=100-a;t.putImageData(e,0,0)}function r(t,r,i,o,n){void 0===o&&(o=3),e(t,n),t.fill(a(r,i,o/2))}function i(t,e,r,i,o){var n=t.createRadialGradient(r,i,0,r,i,o);e.forEach(function(t){var a=t[0],e=t[1];return n.addColorStop(a,e)}),t.fillStyle=n,t.fill(a(r,i,o))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clearCanvas=t,exports.circle=a,exports.fadeOut=e,exports.fadingOutTrace=r,exports.styledCircle=i;
},{}],"6vZm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simulate=s,exports.explode=exports.vecLength=exports.vecSquare=exports.vecMult=void 0;var t=function(){return(t=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)},r=6.674e-11,e=function(t){return t*t},n=function(t,r){return[t[0]+r[0],t[1]+r[1]]},o=function(t,r){return r.map(function(r){return t*r})};exports.vecMult=o;var u=function(t){var r=t[0],e=t[1];return r*r+e*e};exports.vecSquare=u;var a=function(t){return Math.sqrt(u(t))};function s(t,u){var a=t.t,s=t.m,c=t.m_v,p=t.m_pos,v=p[0],i=p[1],f=t.M,m=Math.atan2(i,v)+Math.PI,x=o(r*f/(e(v)+e(i)),[Math.cos(m),Math.sin(m)]);return{m:s,M:f,t:a+u,m_v:n(c,o(u,x)),m_pos:n([v,i],n(o(u,c),o(e(u)/2,x)))}}exports.vecLength=a;var c=function(r,e){return t({},r,{m_v:o(Math.sqrt(1-2*e/r.m/u(r.m_v)),r.m_v)})};exports.explode=c;
},{}],"I7q7":[function(require,module,exports) {
module.exports="sun.a6b0571a.png";
},{}],"7QCb":[function(require,module,exports) {
"use strict";var e=require("./canvas"),t=require("./simulation"),n=i(require("./sun.png"));function i(e){return e&&e.__esModule?e:{default:e}}var u=1.9891e30,m=6957e5,d={mercury:{M:u,t:0,name:"水星",style:[[0,"#7E7673"],[.7,"#8C8384"],[1,"#B0A89D"]],m:3.3011e23,m_v:[0,38860],m_pos:[6982e7,0]},venus:{M:u,t:0,name:"金星",style:[[0,"#A96117"],[.7,"#C08120"],[1,"#E1A83D"]],m:4.8675e24,m_v:[0,34790],m_pos:[10894e7,0]},earth:{M:u,t:0,name:"地球",style:[[0,"#4D7ABE"],[.7,"#5283BB"],[1,"#83B1ED"]],m:5.9723e24,m_v:[0,29290],m_pos:[1521e8,0]},mars:{M:u,t:0,name:"火星",style:[[0,"#9B5A20"],[.7,"#AD6F2F"],[1,"#D59639"]],m:6.4171e23,m_v:[0,21970],m_pos:[24923e7,0]}},a=function e(n,i,u){return u>0?(0,t.vecLength)(n.m_pos)<=m?n:e((0,t.simulate)(n,i),i,u-1):n};function l(e,t){var i=new Image;i.addEventListener("load",function(){e.drawImage(i,e.canvas.width/2-4e10*t,e.canvas.height/2-4e10*t,8e10*t,8e10*t)}),i.src=n.default}function c(n,i,u,m,d){var a=[n.canvas.width/2+m.m_pos[0]*u,n.canvas.height/2-m.m_pos[1]*u];(0,e.styledCircle)(n,d,a[0],a[1],5e9*u),(0,e.fadingOutTrace)(i,a[0],a[1]),document.getElementById("time-display").innerText=(m.t/3600/24).toFixed(3),document.getElementById("input-M").valueAsNumber=m.M/1e29,document.getElementById("input-m").valueAsNumber=m.m/1e22,document.getElementById("input-pos-x").valueAsNumber=m.m_pos[0]/1e9,document.getElementById("input-pos-y").valueAsNumber=m.m_pos[1]/1e9,document.getElementById("input-pos-r").valueAsNumber=(0,t.vecLength)(m.m_pos)/1e9,document.getElementById("input-v-x").valueAsNumber=m.m_v[0]/1e3,document.getElementById("input-v-y").valueAsNumber=m.m_v[1]/1e3,document.getElementById("input-v-len").valueAsNumber=(0,t.vecLength)(m.m_v)/1e3,document.getElementById("input-ek").valueAsNumber=m.m*(0,t.vecSquare)(m.m_v)/2/1e29}window.onload=function(){var n=document.getElementById("view"),i=document.createElement("canvas");i.height=n.clientHeight,i.width=n.clientWidth,i.style.zIndex="2",n.appendChild(i);var u=document.createElement("canvas");u.height=n.clientHeight,u.width=n.clientWidth,u.style.zIndex="1",n.appendChild(u);var s=document.createElement("canvas");s.height=n.clientHeight,s.width=n.clientWidth,s.style.zIndex="0",n.appendChild(s);var v=20,o=9e5,r=5e3,p=o/r,y=r/50,E=i.height/31e10,g=d.mercury,h=d.mercury.style,B=!1,f=!0,I=i.getContext("2d"),_=u.getContext("2d");_.fillStyle="white";var A=s.getContext("2d");function b(){(0,e.clearCanvas)(I),c(I,_,E,g,h)}l(A,E),b(),document.getElementById("input-scale").valueAsNumber=1/E/1e7,document.getElementById("input-timescale").valueAsNumber=10;var N=document.getElementById("input-accuracy");N.valueAsNumber=r,N.step=50..toString(),N.min=50..toString();var L=document.getElementById("continue-pause");function x(){f||(B=!0,L.innerText="▶")}function w(){f&&(B=!1,f=!1,L.innerText="❙❙",function e(n){(0,t.vecLength)(n.m_pos)<=m&&(x(),document.getElementById("title").style.color="red"),g=n,b(),B?(B=!1,f=!0):setTimeout(function(){return e(a(n,p,y))},v)}(g))}document.getElementById("input-work").valueAsNumber=0,L.addEventListener("click",function(){f?w():x()}),document.getElementById("input-timescale").addEventListener("input",function(){this.validity.valid&&(o=86400*this.valueAsNumber,p=o/r)}),document.getElementById("input-accuracy").addEventListener("input",function(){this.validity.valid&&(r=this.valueAsNumber,p=o/r,y=r/50)}),document.getElementById("input-scale").addEventListener("input",function(){this.validity.valid&&(E=1/this.valueAsNumber/1e7,(0,e.clearCanvas)(_),(0,e.clearCanvas)(A),l(A,E),b())}),document.getElementById("explode").addEventListener("click",function(){var e=document.getElementById("input-work");if(e.validity.valid){var n=f;x(),setTimeout(function(){g=(0,t.explode)(g,1e29*e.valueAsNumber),n?b():w()},v)}}),Object.keys(d).forEach(function(t){var n=document.createElement("option");n.innerText=d[t].name,n.addEventListener("click",function(){var n=f;x(),setTimeout(function(){g=d[t],h=d[t].style,(0,e.clearCanvas)(_),n?b():w()},v)}),document.getElementById("preset-select").add(n)}),Array.from(document.getElementById("data").getElementsByTagName("input")).forEach(function(e){e.addEventListener("click",x),e.addEventListener("blur",function(){this.validity.valid&&w()})}),document.getElementById("input-M").addEventListener("input",function(){this.validity.valid&&(g.M=1e29*this.valueAsNumber,b())}),document.getElementById("input-m").addEventListener("input",function(){this.validity.valid&&(g.m=1e22*this.valueAsNumber,b())}),document.getElementById("input-pos-x").addEventListener("input",function(){g.m_pos[0]=1e9*this.valueAsNumber,b()}),document.getElementById("input-pos-y").addEventListener("input",function(){g.m_pos[1]=1e9*this.valueAsNumber,b()}),document.getElementById("input-pos-r").addEventListener("input",function(){g.m_pos=(0,t.vecMult)(1e9*this.valueAsNumber/(0,t.vecLength)(g.m_pos),g.m_pos),b()}),document.getElementById("input-v-x").addEventListener("input",function(){g.m_v[0]=1e3*this.valueAsNumber,b()}),document.getElementById("input-v-y").addEventListener("input",function(){g.m_v[1]=1e3*this.valueAsNumber,b()}),document.getElementById("input-v-len").addEventListener("input",function(){g.m_v=(0,t.vecMult)(1e3*this.valueAsNumber/(0,t.vecLength)(g.m_v),g.m_v),b()}),document.getElementById("input-ek").addEventListener("input",function(){g.m_v=(0,t.vecMult)(Math.sqrt(2*this.valueAsNumber/g.m)/(0,t.vecLength)(g.m_v),g.m_v),b()})};
},{"./canvas":"zcNd","./simulation":"6vZm","./sun.png":"I7q7"}]},{},["7QCb"], null)
//# sourceMappingURL=src.f460abfa.js.map